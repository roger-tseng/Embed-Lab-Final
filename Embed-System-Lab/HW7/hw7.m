clear variables
close all
clc

% x = [0.0, 0.5924659585, -0.0947343455, 0.1913417162, 1.0, 0.4174197128, 0.3535533906, 1.2552931065, 0.8660254038, 0.4619397663, 1.3194792169, 1.1827865776, 0.5, 1.1827865776, 1.3194792169, 0.4619397663, 0.8660254038, 1.2552931065, 0.3535533906, 0.4174197128, 1.0, 0.1913417162, -0.0947343455, 0.5924659585, -0.0, -0.5924659585, 0.0947343455, -0.1913417162, -1.0, -0.4174197128, -0.3535533906, -1.2552931065, -0.8660254038, -0.4619397663, -1.3194792169, -1.1827865776, -0.5, -1.1827865776, -1.3194792169, -0.4619397663, -0.8660254038, -1.2552931065, -0.3535533906, -0.4174197128, -1.0, -0.1913417162, 0.0947343455, -0.5924659585, 0.0, 0.5924659585, -0.0947343455, 0.1913417162, 1.0, 0.4174197128, 0.3535533906, 1.2552931065, 0.8660254038, 0.4619397663, 1.3194792169, 1.1827865776, 0.5, 1.1827865776, 1.3194792169, 0.4619397663, 0.8660254038, 1.2552931065, 0.3535533906, 0.4174197128, 1.0, 0.1913417162, -0.0947343455, 0.5924659585, 0.0, -0.5924659585, 0.0947343455, -0.1913417162, -1.0, -0.4174197128, -0.3535533906, -1.2552931065, -0.8660254038, -0.4619397663, -1.3194792169, -1.1827865776, -0.5, -1.1827865776, -1.3194792169, -0.4619397663, -0.8660254038, -1.2552931065, -0.3535533906, -0.4174197128, -1.0, -0.1913417162, 0.0947343455, -0.5924659585, 0.0, 0.5924659585, -0.0947343455, 0.1913417162, 1.0, 0.4174197128, 0.3535533906, 1.2552931065, 0.8660254038, 0.4619397663, 1.3194792169, 1.1827865776, 0.5, 1.1827865776, 1.3194792169, 0.4619397663, 0.8660254038, 1.2552931065, 0.3535533906, 0.4174197128, 1.0, 0.1913417162, -0.0947343455, 0.5924659585, 0.0, -0.5924659585, 0.0947343455, -0.1913417162, -1.0, -0.4174197128, -0.3535533906, -1.2552931065, -0.8660254038, -0.4619397663, -1.3194792169, -1.1827865776, -0.5, -1.1827865776, -1.3194792169, -0.4619397663, -0.8660254038, -1.2552931065, -0.3535533906, -0.4174197128, -1.0, -0.1913417162, 0.0947343455, -0.5924659585, -0.0, 0.5924659585, -0.0947343455, 0.1913417162, 1.0, 0.4174197128, 0.3535533906, 1.2552931065, 0.8660254038, 0.4619397663, 1.3194792169, 1.1827865776, 0.5, 1.1827865776, 1.3194792169, 0.4619397663, 0.8660254038, 1.2552931065, 0.3535533906, 0.4174197128, 1.0, 0.1913417162, -0.0947343455, 0.5924659585, -0.0, -0.5924659585, 0.0947343455, -0.1913417162, -1.0, -0.4174197128, -0.3535533906, -1.2552931065, -0.8660254038, -0.4619397663, -1.3194792169, -1.1827865776, -0.5, -1.1827865776, -1.3194792169, -0.4619397663, -0.8660254038, -1.2552931065, -0.3535533906, -0.4174197128, -1.0, -0.1913417162, 0.0947343455, -0.5924659585, 0.0, 0.5924659585, -0.0947343455, 0.1913417162, 1.0, 0.4174197128, 0.3535533906, 1.2552931065, 0.8660254038, 0.4619397663, 1.3194792169, 1.1827865776, 0.5, 1.1827865776, 1.3194792169, 0.4619397663, 0.8660254038, 1.2552931065, 0.3535533906, 0.4174197128, 1.0, 0.1913417162, -0.0947343455, 0.5924659585, 0.0, -0.5924659585, 0.0947343455, -0.1913417162, -1.0, -0.4174197128, -0.3535533906, -1.2552931065, -0.8660254038, -0.4619397663, -1.3194792169, -1.1827865776, -0.5, -1.1827865776, -1.3194792169, -0.4619397663, -0.8660254038, -1.2552931065, -0.3535533906, -0.4174197128, -1.0, -0.1913417162, 0.0947343455, -0.5924659585, -0.0, 0.5924659585, -0.0947343455, 0.1913417162, 1.0, 0.4174197128, 0.3535533906, 1.2552931065, 0.8660254038, 0.4619397663, 1.3194792169, 1.1827865776, 0.5, 1.1827865776, 1.3194792169, 0.4619397663, 0.8660254038, 1.2552931065, 0.3535533906, 0.4174197128, 1.0, 0.1913417162, -0.0947343455, 0.5924659585, 0.0, -0.5924659585, 0.0947343455, -0.1913417162, -1.0, -0.4174197128, -0.3535533906, -1.2552931065, -0.8660254038, -0.4619397663, -1.3194792169, -1.1827865776, -0.5, -1.1827865776, -1.3194792169, -0.4619397663, -0.8660254038, -1.2552931065, -0.3535533906, -0.4174197128, -1.0, -0.1913417162, 0.0947343455, -0.5924659585, -0.0, 0.5924659585, -0.0947343455, 0.1913417162, 1.0, 0.4174197128, 0.3535533906, 1.2552931065, 0.8660254038, 0.4619397663, 1.3194792169, 1.1827865776, 0.5, 1.1827865776, 1.3194792169, 0.4619397663, 0.8660254038, 1.2552931065, 0.3535533906, 0.4174197128, 1.0, 0.1913417162, -0.0947343455, 0.5924659585, 0.0, -0.5924659585, 0.0947343455, -0.1913417162, -1.0, -0.4174197128, -0.3535533906, -1.2552931065];
x = [-840.000000, 490.000000, 490.000000, -70.000000, -70.000000, -70.000000, -70.000000, -70.000000, -70.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 70.000000, 70.000000, 70.000000, 70.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 70.000000, 70.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 70.000000, 0.000000, 0.000000, 70.000000, 70.000000, 70.000000, 70.000000, 70.000000, 0.000000, 0.000000, 70.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 70.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 70.000000, 70.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 70.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 70.000000, 70.000000, 70.000000, 70.000000, 70.000000, 70.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000,];
% x = [x(10:end)];
h = fir1(28, 6/24);
ideal = lowpass(x,6)
y = filter(h, 1, x);
disp(y);
for ele = 1:29
    disp(h(ele));
end
figure
subplot(2,2,1)
plot(x)
title("Gryoscope X-axis Signal")
subplot(2,2,2)
ans = [1.530919, 0.440825, -1.671122, -3.756620, -4.732732, -1.157796, 8.116658, 18.208483, 18.975143, 1.455263, -33.280857, -70.969070, -89.933273, -74.190514, -25.393555, 35.274033, 77.855019, 80.683739, 43.348637, -13.865138, -62.430557, -81.883202, -70.028015, -40.536991, -12.104398, 3.228756, 5.171743, 1.983363, 2.948453, 11.178929, 28.790201, 47.345539, 58.685650, 59.139774, 48.655621, 31.490894, 14.005149, 1.171203, -5.346075, -7.161029, -6.618983, -4.780795, -0.913903, 6.155397, 16.101559, 26.279272, 32.900726, 32.900726, 26.131584, 15.388592, 4.734159, -2.335141, -4.725351, -3.735626, -1.328994, 0.597116, 1.293662, 1.150671, 0.617226, -0.091044, -0.871179, -1.207704, -0.913903, 0.075823, 2.177350, 5.308358, 9.920381, 16.890978, 26.865086, 39.312611, 52.044365, 61.742573, 65.382767, 61.742565, 52.044369, 39.312614, 26.865084, 16.890976, 9.920382, 5.308357, 2.177350, 0.075823, -0.913903, -1.080127, -0.632448, 0.020111, 0.358384, 0.326548, 0.131266, 0.000000, -0.111155, -0.127577, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, -0.127577, -0.111155, 0.000000, 0.258843, 0.565280, 0.597116, 0.000000, -1.217839, -2.390210, -2.462718, -0.238732, 4.623004, 10.913275, 16.428852, 18.697124, 16.201843, 9.436593, 1.126110, -4.725351, -4.670282, 2.343949, 14.170752, 26.259161, 33.736572, 33.704735, 26.518003, 15.388592, 4.623004, -2.462718, -4.725351, -3.608049, -1.345415, 0.485960, 1.162396, 1.082965, 0.824123, 0.485960, -0.238732, -1.345415, -2.390210, -2.335141, 0.000000, 4.734159, 10.526855, 15.365996, 17.295996, 15.624839, 11.239822, 5.916665, 1.310083, -2.131742, -4.577022, -5.998634, -5.346075, -0.611916, 10.010680, 26.526812, 46.192909, 64.021622, 74.659637, 74.787209, 64.132774];
hold on 
plot(y, 'LineWidth', 2)
plot(ans, 'LineWidth', 1)
title("Filtered Gyro Signal")
hold off

Wx = fft(x);
PWx = abs(fftshift(Wx)/length(Wx));
fx = 48000/2*linspace(-1,1,length(Wx));
subplot(2,2,3)
plot(fx, PWx)
title("Gryoscope X-axis Signal (w-domain)")
Wy = fft(y);
PWy = abs(fftshift(Wy)/length(Wy));
fy = 48000/2*linspace(-1,1,length(Wy));
Wans = fft(ans);
PWans = abs(fftshift(Wans)/length(Wans));
fans = 48000/2*linspace(-1,1,length(Wans));
subplot(2,2,4)
hold on
plot(fy, PWy, 'LineWidth', 2)
plot(fans, PWans, 'LineWidth', 1)
title("Filtered Gyro Signal (w-domain)")

